# device/oemc1/oemc1/BoardConfig.mk



# oemc1.mk
- KERNEL_MODULES_OUT
- BOARD_KERNEL_MODULE_DIRS 
```
# Kernel modules install path
KERNEL_MODULES_INSTALL := dlkm
ifneq (,$(findstring -gki_defconfig,$(KERNEL_DEFCONFIG)))
KERNEL_MODULES_OUT := out/target/product/$(PRODUCT_NAME)/$(KERNEL_MODULES_INSTALL)/lib/modules/gki
BOARD_KERNEL_MODULE_DIRS := 5.4-gki
$(warning BOARD_KERNEL_MODULE_DIRS - $(BOARD_KERNEL_MODULE_DIRS) )
$(warning #### OEMC1 GKI KERNEL_MODULES_OUT: $(KERNEL_MODULES_OUT) ####)
else
KERNEL_MODULES_OUT := out/target/product/$(PRODUCT_NAME)/$(KERNEL_MODULES_INSTALL)/lib/modules
$(warning #### OEMC1 QGKI KERNEL_MODULES_OUT: $(KERNEL_MODULES_OUT) ####)
endif

```

# kernel_definitions.mk
```
KERNEL_TARGET := $(strip $(INSTALLED_KERNEL_TARGET))
ifeq ($(KERNEL_TARGET),)
ifneq (,$(findstring -gki_defconfig,$(KERNEL_DEFCONFIG)))
# INSTALLED_KERNEL_TARGET := $(PRODUCT_OUT)/kernel-gki
INSTALLED_KERNEL_TARGET := $(PRODUCT_OUT)/kernel
$(warning #### OEMC1 GKI INSTALLED_KERNEL_TARGET: $(INSTALLED_KERNEL_TARGET) ####)
else
INSTALLED_KERNEL_TARGET := $(PRODUCT_OUT)/kernel
$(warning #### OEMC1 QGKI INSTALLED_KERNEL_TARGET: $(INSTALLED_KERNEL_TARGET) ####)
endif
```

#Makefile
```
ifneq ($(BOARD_DO_NOT_STRIP_VENDOR_MODULES),true)
	VENDOR_STRIPPED_MODULE_STAGING_DIR := $(call intermediates-dir-for,PACKAGING,depmod_vendor_stripped)
	VENDOR_STRIPPED_MODULE_STAGING_DIR_5.4-gki := $(VENDOR_STRIPPED_MODULE_STAGING_DIR)_5.4-gki	
else
	VENDOR_STRIPPED_MODULE_STAGING_DIR :=
	VENDOR_STRIPPED_MODULE_STAGING_DIR_5.4-gki :=
endif
$(info Makefile VENDOR_STRIPPED_MODULE_STAGING_DIR - $(VENDOR_STRIPPED_MODULE_STAGING_DIR))
$(info Makefile VENDOR_STRIPPED_MODULE_STAGING_DIR_5.4-gki - $(VENDOR_STRIPPED_MODULE_STAGING_DIR_5.4-gki))


ifneq ($(BOARD_DO_NOT_STRIP_VENDOR_RAMDISK_MODULES),true)
  VENDOR_RAMDISK_STRIPPED_MODULE_STAGING_DIR := $(call intermediates-dir-for,PACKAGING,depmod_vendor_ramdisk_stripped)
  VENDOR_RAMDISK_STRIPPED_MODULE_STAGING_DIR_5.4-gki := $(VENDOR_RAMDISK_STRIPPED_MODULE_STAGING_DIR)_5.4-gki
else
  VENDOR_RAMDISK_STRIPPED_MODULE_STAGING_DIR :=
  VENDOR_RAMDISK_STRIPPED_MODULE_STAGING_DIR_5.4-gki :=
endif

$(info Makefile VENDOR_RAMDISK_STRIPPED_MODULE_STAGING_DIR - $(VENDOR_RAMDISK_STRIPPED_MODULE_STAGING_DIR))
$(info Makefile VENDOR_RAMDISK_STRIPPED_MODULE_STAGING_DIR_5.4-gki - $(VENDOR_RAMDISK_STRIPPED_MODULE_STAGING_DIR_5.4-gki))


#BOARD_VENDOR_RAMDISK_RECOVERY_KERNEL_MODULES_LOAD_5.4-gki := $(BOARD_VENDOR_RAMDISK_RECOVERY_KERNEL_MODULES_LOAD)_5.4-gki
BOARD_VENDOR_RAMDISK_RECOVERY_KERNEL_MODULES_LOAD_5.4-gki :=


```